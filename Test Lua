-- TriggerBot Da Hood Style - Pour test d'anti-cheat uniquement

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- Paramètres
local TRIGGERBOT_ENABLED = false
local TRIGGER_DELAY = 0.05 -- petit délai
local PING_COMPENSATION = 0.06 -- en secondes (≈ 60 ms)

-- GUI
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "TriggerBotMenu"
screenGui.ResetOnSpawn = false

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 280, 0, 160)
frame.Position = UDim2.new(0.5, -140, 0.5, -80)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BorderSizePixel = 0
frame.Visible = false
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 8)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "TriggerBot Da Hood Style"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 18

local statusLabel = Instance.new("TextLabel", frame)
statusLabel.Size = UDim2.new(1, 0, 0, 40)
statusLabel.Position = UDim2.new(0, 0, 0, 40)
statusLabel.BackgroundTransparency = 1
statusLabel.TextColor3 = Color3.new(1, 1, 1)
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 16
statusLabel.Text = "Status: OFF (press C)"

-- Toggle Menu (Ctrl)
UIS.InputBegan:Connect(function(input, processed)
	if processed then return end
	if input.KeyCode == Enum.KeyCode.LeftControl then
		frame.Visible = not frame.Visible
	end
end)

-- Toggle TriggerBot (C)
UIS.InputBegan:Connect(function(input, processed)
	if processed then return end
	if input.KeyCode == Enum.KeyCode.C then
		TRIGGERBOT_ENABLED = not TRIGGERBOT_ENABLED
		statusLabel.Text = "Status: " .. (TRIGGERBOT_ENABLED and "ON" or "OFF") .. " (press C)"
	end
end)

-- Fonction de prédiction simple
local function predictPosition(humanoidRootPart)
	if not humanoidRootPart then return nil end
	local velocity = humanoidRootPart.Velocity
	local predicted = humanoidRootPart.Position + (velocity * PING_COMPENSATION)
	return predicted
end

-- Fonction qui vérifie si c'est un ennemi
local function getTargetUnderMouse()
	local target = mouse.Target
	if not target then return nil end

	local model = target:FindFirstAncestorOfClass("Model")
	if not model then return nil end

	local humanoid = model:FindFirstChildOfClass("Humanoid")
	local root = model:FindFirstChild("HumanoidRootPart")

	if humanoid and humanoid.Health > 0 and root and Players:GetPlayerFromCharacter(model) ~= player then
		return root
	end

	return nil
end

-- Fonction qui tire
local function fireWeapon()
	local char = player.Character
	if not char then return end
	local tool = char:FindFirstChildOfClass("Tool")
	if tool and tool:FindFirstChild("Activate") then
		tool:Activate()
	end
end

-- Boucle TriggerBot
RunService.RenderStepped:Connect(function()
	if not TRIGGERBOT_ENABLED then return end

	local targetHRP = getTargetUnderMouse()
	if targetHRP then
		local predictedPos = predictPosition(targetHRP)
		if predictedPos then
			local cam = workspace.CurrentCamera
			cam.CFrame = CFrame.new(cam.CFrame.Position, predictedPos)
			task.wait(TRIGGER_DELAY)
			if getTargetUnderMouse() then
				fireWeapon()
			end
		end
	end
end)
