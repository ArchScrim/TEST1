-- TriggerBot avec Menu GUI (Test Anti-Cheat)
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- Variables de configuration
local triggerBotActive = true
local headshotOnly = true
local triggerDelay = 0.05

-- Créer le GUI
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "TriggerBotMenu"
screenGui.ResetOnSpawn = false

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 300, 0, 220)
frame.Position = UDim2.new(0.5, -150, 0.5, -110)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BorderSizePixel = 0
frame.Visible = true

Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 8)

local title = Instance.new("TextLabel", frame)
title.Text = "TriggerBot Menu"
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 20

-- Fonction création de bouton
local function createButton(text, yPos, onClick)
	local button = Instance.new("TextButton", frame)
	button.Size = UDim2.new(0.9, 0, 0, 35)
	button.Position = UDim2.new(0.05, 0, 0, yPos)
	button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.Font = Enum.Font.Gotham
	button.TextSize = 16
	button.Text = text
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)
	button.MouseButton1Click:Connect(onClick)
	return button
end

-- Boutons
local toggleTrigger = createButton("TriggerBot: ON", 50, function(btn)
	triggerBotActive = not triggerBotActive
	btn.Text = "TriggerBot: " .. (triggerBotActive and "ON" or "OFF")
end)

local toggleHeadshot = createButton("Headshot Only: ON", 95, function(btn)
	headshotOnly = not headshotOnly
	btn.Text = "Headshot Only: " .. (headshotOnly and "ON" or "OFF")
end)

local delayButton = createButton("Trigger Delay: 0.05s", 140, function(btn)
	local newDelay = tonumber(string.format("%.2f", triggerDelay + 0.05))
	if newDelay > 0.25 then newDelay = 0.05 end
	triggerDelay = newDelay
	btn.Text = "Trigger Delay: " .. newDelay .. "s"
end)

-- Toggle menu (CTRL)
UIS.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end
	if input.KeyCode == Enum.KeyCode.LeftControl then
		frame.Visible = not frame.Visible
	end
end)

-- Vérifie si la cible est un ennemi (simulateur)
local function isEnemy(part)
	if not part then return false end
	local model = part:FindFirstAncestorOfClass("Model")
	if not model then return false end
	local humanoid = model:FindFirstChildOfClass("Humanoid")
	if humanoid and Players:GetPlayerFromCharacter(model) ~= player then
		if headshotOnly then
			return part.Name == "Head"
		end
		return true
	end
	return false
end

-- Active l’arme
local function fireWeapon()
	local char = player.Character
	if not char then return end
	local tool = char:FindFirstChildOfClass("Tool")
	if tool then
		if tool:FindFirstChild("Activate") then
			tool:Activate()
		elseif tool:FindFirstChildOfClass("RemoteEvent") then
			tool:FindFirstChildOfClass("RemoteEvent"):FireServer()
		end
	end
end

-- TriggerBot loop
RunService.RenderStepped:Connect(function()
	if not triggerBotActive then return end
	local target = mouse.Target
	if isEnemy(target) then
		task.wait(triggerDelay)
		if mouse.Target == target then -- encore sur la même cible
			fireWeapon()
		end
	end
end)
